@extends('bootstrap.template')

@section('title')
Catálogo de Películas
@endsection

@section('content')

<div class="d-flex justify-content-between align-items-center mb-4 pb-2 border-bottom">
    <!-- CORREGIDO: Variables sin escapar -->
    <h2 style="color: #ffc300; font-weight: 700;">Catálogo de Películas ({{ $peliculas->count() }})</h2>
    <!-- Botón para añadir nueva película -->
    <a href="{{ route('pelicula.create') }}" class="btn btn-primary"
        style="background-color: #e50914; border-color: #e50914; font-weight: 600;">
        <i class="fas fa-plus-circle"></i> Añadir Película
    </a>
</div>

@if($peliculas->isEmpty())
@foreach($peliculas as $pelicula)
<!-- Área de Portada -->
<div class="poster-image-container">
    @if($pelicula->portada)
    <img src="{{ asset('storage/' . $pelicula->portada) }}" class="card-img-top poster-image"
        alt="Portada de {{ $pelicula->titulo }}"
        style="height: 350px; object-fit: cover; border-radius: 10px 10px 0 0;">
    @else
    <div class="poster-placeholder d-flex align-items-center justify-content-center"
        style="height: 350px; background-color: #1c1c1c; border-radius: 10px 10px 0 0;">
        <span style="color: #6c757d; font-size: 1.2rem;">Sin Portada</span>
    </div>
    @endif
</div>

<!-- Cuerpo de la Tarjeta (Detalles) -->
<div class="card-body text-center d-flex flex-column">
    <h5 class="card-title mb-1"
        style="color: #f7f7f7; font-weight: 700; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
        {{ $pelicula->titulo }}
    </h5>
    <p class="card-text mb-3" style="color: #b0b0b0; font-size: 0.9rem;">
        Director: {{ $pelicula->director }}
    </p>

    <!-- Botones de Acción -->
    <div class="mt-auto d-grid gap-2">
        <a href="{{ route('pelicula.show', $pelicula->id) }}" class="btn btn-sm btn-outline-warning"
            style="color: #ffc300; border-color: #ffc300;">
            Ver Detalle
        </a>
        <a href="{{ route('pelicula.edit', $pelicula->id) }}" class="btn btn-sm btn-outline-danger"
            style="color: #e50914; border-color: #e50914;">
            Editar
        </a>
    </div>
</div>
</div>
</div>
@endforeach
</div>
<!-- FIN: Estructura de la cuadrícula y el bucle FOREACH -->


@endif

<!-- Incluir FontAwesome para los iconos (si no está en la plantilla base) -->

<link rel="stylesheet"
    href="https://www.google.com/search?q=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
    integrity="sha512-1ycn6IcaQQ40B7iMtyqQgS/l/e1Mh/QdJ0bN4FwV2Z8aP2E1gI1r0Z9GzR5eP+K7vK3hN+FfGjE1g/l+l+p3Q=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
@endsection